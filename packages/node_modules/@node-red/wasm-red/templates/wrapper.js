// Use rollup to inject here all the dependencies
{{{ dependencies }}}

// This is a patch for rollup
let module = {
  "type": "wasm-wrapping"
};
console.log("Initializing context. Reading msg and node from Node.IO");
let msg = Node.IO.msg();
let node =  Node.IO.node();

const send = Node.IO.send;
const done = Node.IO.done;

node.send = send;
node.done = done


RED._ = function(obj) {
  return obj;
}

{{{
  inner_code
}}}



function main() {
  console.log("Executing inside Javy's WASM VM");
  {{mm}}({{{args}}});
}

main();